# Kafka Concepts and Components

## Use Cases
- **Asynchronous messaging (low-latency)**  
- **Real-time stream processing**: Consumers can process messages immediately as they arrive.  
- **Logging and monitoring**  
- **Event sourcing pattern**: Enables detection and analysis of an entity's state.  
- **Real-time analytics**

---

## Kafka Messages
- **Unit of Data**: Row, record, map, or blob.  
  - Treated as a byte array with no semantic meaning.  
  - Configurable maximum message size (default: 1 MB).  
  - Supports batch requests from producers or consumers.
  
### Message Content
- **Key**:  
  - Not mandatory to be unique.  
  - Used for partitioning.  
  - Kafka assigns a random key if not provided.
- **Value**:  
  - Content of the message, defined by the user.
- **Timestamp**:  
  - Automatically generated by Kafka.  
  - Configurable types:  
    - **Event Time**: When the producer creates the message.  
    - **Ingestion Time**: When the broker stores the message.

---

## Topics
- A **holder of messages** that acts as a queue for similar messages.  
  - Similar messages have the same structure, format, producers, and consumers.
- Kafka supports multiple topics per instance, each with:  
  - **Multiple producers** and **multiple consumers**.
  - **Partitions** for scalability and parallel processing.  
- **Partitions**:
  - Each topic can have 1â€“n partitions.  
  - Enables horizontal scalability and parallel storage/consumption of messages.  
  - Message order is guaranteed **within a partition** but not across partitions.

---

## Kafka Broker
- A Kafka instance responsible for:  
  - Receiving and storing messages.  
  - Managing subscriptions, topics, partitions, and logs.  
- **Clustering capability**:  
  - Kafka can handle failover by designating a leader among brokers.
- **Logs**:  
  - Physical files where data is stored.  
  - Managed by brokers and pruned periodically (default retention: 7 days).

---

## Producer
- Any client that publishes data to Kafka.
- **Features**:
  - Supports multiple concurrent producers per topic.
  - Can serialize messages into bytes.
  - Publishes messages synchronously or asynchronously.

---

## Consumer
- Consumes messages from Kafka as long as they are stored in the log.  
- **Features**:
  - Supports multiple concurrent consumers per topic.  
  - Uses consumer groups to scale workloads.  
  - Acknowledges brokers upon successful message consumption.  
  - Deserializes messages from bytes into the original format.

---

## Kafka Offsets
- A number used to track message consumption by consumers and partitions.
- **Key Concepts**:
  - Each message is tagged with an offset to track its state.  
  - **Current Offset**: The last message sent to a consumer.  
  - **Committed Offset**: The last message acknowledged by the consumer.
- **Consumer Options**:
  - Start receiving messages:  
    - From the **beginning** of the topic.  
    - From **new** messages only.  
    - At a **specific offset**.
